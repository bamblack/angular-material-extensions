<div
    #aboveTableContainer
    class="amx-grid_above-table--container"
    [style.position]="stickyHeader ? 'sticky' : 'static'"
>
    @if(hasFiltersContainer) {
        <div class="amx-grid_filters--container">
            <ng-template [cdkPortalOutlet]="filtersContainerPortal"></ng-template>
        </div>
    }

    @if(api.data.isLocalDataSource) {
        <div class="amx-grid_total-results--container">
            @if (api.data.totalCount !== api.data.filteredCount) {
                Displaying {{ api.data.filteredCount }} of {{ api.data.totalCount }} total results
                <button mat-button (click)="api.filters.clearFilters()">Clear filters</button>
            } @else {
                {{ api.data.totalCount }} results
            }
        </div>
    }
</div>
<mat-table [dataSource]="api.data.dataSource">
    <ng-container
        *ngFor="let column of api.columns.columnDefintions"
        [matColumnDef]="column.id"
        [sticky]="column.sticky === 'left'"
        [stickyEnd]="column.sticky === 'right'"
    >
        <mat-header-cell *matHeaderCellDef>
            {{ column.headerName ?? column.field }}
        </mat-header-cell>
        <mat-cell *matCellDef="let element">
            {{ element[column.field] }}
        </mat-cell>
    </ng-container>

    <mat-header-row
        *matHeaderRowDef="api.columns.matColumns; sticky: stickyHeader"
        [amxGridStickyHeader]="aboveTableElement"
        [amxGridStickyHeaderSticky]="stickyHeader"
    >
    </mat-header-row>
    <mat-row *matRowDef="let row; columns: api.columns.matColumns"></mat-row>
</mat-table>
